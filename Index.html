<!DOCTYPE html>
<html>
<head>
    <title>DreadHead App</title>
    <meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Dread-ur-head app shows you how it would look like, if you would have dreads.">	
	<meta name="developper" content="Mike Barmettler">
	

	<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /> 

	<!-- bootstrap, jquery, jquery ui -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>	
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

	<!-- jquery ui touch punch -->
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>

	<!-- rotation resources -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/godswearhats/jquery-ui-rotatable@1.1/jquery.ui.rotatable.css">
	<script src="https://cdn.jsdelivr.net/gh/godswearhats/jquery-ui-rotatable@1.1/jquery.ui.rotatable.min.js"></script>
		
	<!--jwatermark-->
	<!-- <script src="libs/baivong-watermark-2dd6d88/dist/jquery.watermark.min.js"></script> -->
	
	<!-- jcanvas -->
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jcanvas/20.1.4/min/jcanvas.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jcanvas/20.1.4/min/jcanvas-crescents.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jcanvas/20.1.4/min/jcanvas-donuts.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jcanvas/20.1.4/min/jcanvas-handles.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jcanvas/20.1.4/min/jcanvas-hearts.min.js"></script>

	<!-- <script src="libs/html2canvas.min.js"></script> -->

	<!--bs slider-->
	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/10.0.0/bootstrap-slider.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/10.0.0/css/bootstrap-slider.min.css"  type="text/css"> -->
	
	<!--app style-->
	<link rel="stylesheet" href="Assets/css/site.css" type="text/css">	

	<!-- site scripts -->
	<script src="Assets/js/site.js"></script>

	<script>
		$(function () {			

			//init DreadSelectionList
			initializeDreadSelectionList(dreadSelectionArray);		
										
			//generate image with watermark & download image locally
			$("#genBtn").on("click", function(e) {
				e.preventDefault();  //stop the browser from following

				generateImage();

				$("#outputModal").modal("show");
			});

			//share image
			$("#shareBtn").on("click", function (e) {
				e.preventDefault();  //stop the browser from following
				
			});			

			//download image
			$("#dwlBtn").on("click", function (e) {
				e.preventDefault();  //stop the browser from following

				downloadImage(this, "canvas", 'dreadhead.png');

				   
				//var canvassource = $("#canvas").getCanvasImage('png');
				
				// console.log(e);				
				// console.log(canvassource);

				//e.currentTarget.attr("href", canvassource);
			});			

			function downloadImage(link, canvasId, filename){
				link.href = document.getElementById(canvasId).toDataURL();
				link.download = filename;
			}
	
		//end of doc ready
		});
		
	</script>
<style>
/* .teststyle {  
		display: -webkit-box;
		display: -moz-box;
		display: -ms-flexbox;
		display: -webkit-flex;
		display: flex;
		flex:1 0 auto;
	} */
	</style>
</head>

<body>	
    <div class="container-fluid">
		<div class="row">
			<div class="col-md-1">	
				<a href="http://dreadlocks-artesanal.ch/" target="_blank">
					<img src="Assets/img/corp/logo.png" class="img-responsive" width="130"/>
				</a>
			</div>
		</div>
		<div class="row">
            <div class="col-md-8">
                <div class="jumbotron">
					<div id="croppingArea" class="cropping-area"></div>
					<button id="zoomplus" class="btn btn-success"><i class="fa fa-search-plus" aria-hidden="true"></i></button>
					<button id="zoomminus" class="btn btn-success"><i class="fa fa-search-minus" aria-hidden="true"></i></button>
					<h3><span class="label label-outline-default">1</span> 
						choose your portrait
					</h3>
					<input type="file" class="inputfile" id="myPortraitSelector"/>
					<label for="myPortraitSelector" class="btn btn-danger"><i class="fa fa-upload" aria-hidden="true"></i>
						select
					</label>
					<br/><br/>

					<h3><span class="label label-outline-default">3</span> generate </h3>					
					<button class="btn btn-success disabled" id="genBtn">
						<i class="fa fa-check" aria-hidden="true"></i> 
						generate
					</button>
				</div>
				
				<!--just for DEV testcases-->
				<!-- <a id="dwlDreadLink" href="#" target="_blank">
					<canvas id="canvas" width="900px" height="600px" style="border:1px dotted red" />
				</a> -->
			</div>

			<div class="col-md-4"  style="padding-left: 0PX !important;">
				<h3 class="special-header row"><span class="label label-outline-default">2</span> choos your dreads</h3>										
				
				<div id="dreadSelectionList" class="row teststyle" />
            </div>   			
		</div>

		<!--Modal Output-->
		<div id="outputModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">	
						<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
								<h3>Generated DreadHead</h3>
						</div>
						<div class="modal-body">
							<canvas id="canvas" width="800px" height="600px" />
						</div>
						<div class="modal-footer">
							<button id="shareBtn" type="button" class="btn btn-info"><i class="fa fa-share-alt" aria-hidden="true"></i>
								share
							</button>							
							<button id="dwlBtn" class="btn btn-success" target="_blank"><i class="fa fa-download" aria-hidden="true"></i>
								download
							</button>
						</div>
					</div>
				</div>	
			</div>
	</div>
  <!-- end of container -->

</body>
</html>
